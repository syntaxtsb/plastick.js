<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1">
<title>plastick.js &#8212; A lightweight, time-accurate game loop framework for Javascript.</title>
<style>

.back-to-top {
    display: none;
    position: fixed;
    right: 1em;
    bottom: 1em;
    z-index: 999;
}

.back-to-top a {
    display: block;
    padding: .5em .6em;
    line-height: 1em;
    border-radius: .25em;
    background: #fff;
}

.back-to-top a svg {
    vertical-align: middle;
}

.permalink {
    position: absolute;
    margin-left: -.75em;
    font-weight: normal;
    color: #eee;
}

.permalink:hover {
    text-decoration: none;
}

.method h2 {
    line-height: 1.3em;
    text-overflow: ellipsis;
    overflow: hidden;
}

.permalink:hover,
.doxdox .menu .file {
    color: #E54D89;
}

pre .hljs {
    padding: 0;
    background: none;
}

.doxdox .wrap {
    padding: 0 1em;
}

.doxdox .jumbotron p,
.doxdox .label-default {
    -webkit-font-smoothing: antialiased;
}

.doxdox .jumbotron {
    margin-bottom: 0;
    background-color: #2B303E;
}

.doxdox .jumbotron h1,
.doxdox .jumbotron h1 a {
    color: #eee;
}

.doxdox .jumbotron p {
    color: #ccc;
}

.doxdox .menu {
    margin: 1.5em 0 0 0;
    padding: 0;
}

.doxdox .menu li {
    list-style: none;
}

.doxdox .menu li ul {
    padding: 0;
}

.doxdox .menu li a {
    display: block;
    padding: .25em;
    overflow: hidden;
    text-overflow: ellipsis;
}

.doxdox .menu .scope-private a {
    color: #8BAAC6;
}

.doxdox .bs-footer {
    margin: 3em auto;
    color: #777;
    text-align: center;
}

</style>
<script>

(function (w, d, f) {

    'use strict';

    var protocol = w.location.protocol === 'file:' ? 'http:' : w.location.protocol,
        resource = [
            '//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css',
            '//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css',
            '//code.jquery.com/jquery-2.1.3.js',
            '//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js'
        ];

    function loadResource(url) {

        var tag;

        if (url.match(/\.js$/)) {

            tag = d.createElement('script');
            tag.setAttribute('src', protocol + url);

        } else if (url.match(/\.css$/)) {

            tag = d.createElement('link');
            tag.setAttribute('rel', 'stylesheet');
            tag.setAttribute('href', protocol + url);

        }

        tag.addEventListener('load', function () {

            if (resource.length) {

                loadResource(resource.shift());

            } else {

                if ($.isReady) {

                    f();

                } else {

                    $(document).ready(f);

                }

            }

        });

        d.head.appendChild(tag);

    }

    loadResource(resource.shift());

}(window, document, function () {

    'use strict';

    var headerHeight = $('.jumbotron').outerHeight(true),
        $backToTop = $('.back-to-top');

    function handleScrollEvent() {

        if (window.scrollY > headerHeight && $backToTop.not(':visible')) {

            $backToTop.fadeIn();

        } else if (window.scrollY < headerHeight && $backToTop.is(':visible')) {

            $backToTop.fadeOut();

        }

    }

    $('pre code:not(.hljs)').each(function () {
        hljs.highlightBlock(this);
    });

    $(window).on('scroll', handleScrollEvent);

    handleScrollEvent();

}));

</script>
</head>

<body class="doxdox">

<div class="back-to-top">
    <a href="#"> <svg xmlns="http://www.w3.org/2000/svg" width="13px" height="14px" viewBox="0 0 13 14"><path d="M7.18761156,13 L7.18761156,5.49249703 L10.4587853,5.49249703 L5.09931763,0.113558129 L-0.26015,5.49249703 L3.01102371,5.49249703 L3.01102371,13 L7.18761156,13 Z" fill="#428bca"></path></svg> Back to Top</a>
</div>

<div class="jumbotron">

    <div class="container">

        <h1>
                plastick.js
            <small>0.4.0-beta</small>
        </h1>

        <p>A lightweight, time-accurate game loop framework for Javascript.</p>

    </div>

</div>

<div class="wrap">

    <div class="container">

        <div class="row">

            <div class="col-md-3 hidden-sm hidden-xs">

                <ul class="menu">


                    <li>
                        <a href="#plastick.js" class="file"><b>plastick.js</b></a>
                        <ul>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick" title="Plastick">Plastick</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.start" title="Plastick.start">Plastick.start</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.stop" title="Plastick.stop">Plastick.stop</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.isrunning" title="Plastick.isRunning">Plastick.isRunning</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.pushstate" title="Plastick.pushState">Plastick.pushState</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.popstate" title="Plastick.popState">Plastick.popState</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.changestate" title="Plastick.changeState">Plastick.changeState</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.currentstate" title="Plastick.currentState">Plastick.currentState</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.gametime" title="Plastick.gameTime">Plastick.gameTime</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.lerp" title="Plastick.lerp">Plastick.lerp</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.prototype.setdebug" title="Plastick.setDebug">Plastick.setDebug</a>
                        </li>


                        <li class="scope-private">
                            <a href="#plastick.js-plastick.prototype._cleanup" title="Plastick._cleanup">Plastick._cleanup</a>
                        </li>


                        <li class="scope-private">
                            <a href="#plastick.js-plastick.prototype._freeze" title="Plastick._freeze">Plastick._freeze</a>
                        </li>


                        <li class="scope-private">
                            <a href="#plastick.js-plastick.prototype._createeventlisteners" title="Plastick._createEventListeners">Plastick._createEventListeners</a>
                        </li>


                        <li class="scope-private">
                            <a href="#plastick.js-plastick.prototype._destroyeventlisteners" title="Plastick._destroyEventListeners">Plastick._destroyEventListeners</a>
                        </li>


                        <li class="scope-private">
                            <a href="#plastick.js-plastick.prototype._gameloop" title="Plastick._gameLoop">Plastick._gameLoop</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state" title="Plastick.State">Plastick.State</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.registerlistener" title="Plastick.State.registerListener">Plastick.State.registerListener</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.deregisterlistener" title="Plastick.State.deregisterListener">Plastick.State.deregisterListener</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.init" title="Plastick.State.init">Plastick.State.init</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.cleanup" title="Plastick.State.cleanup">Plastick.State.cleanup</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.update" title="Plastick.State.update">Plastick.State.update</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.draw" title="Plastick.State.draw">Plastick.State.draw</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.pause" title="Plastick.State.pause">Plastick.State.pause</a>
                        </li>


                        <li class="scope-public">
                            <a href="#plastick.js-plastick.state.prototype.resume" title="Plastick.State.resume">Plastick.State.resume</a>
                        </li>


                        </ul>

                    </li>


                </ul>

            </div>

            <div class="col-md-9">


                <a id="plastick.js" />


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick">
                            <a href="#plastick.js-plastick" class="permalink">#</a> Plastick(stage)
                        </h2>

                        <p>Create a Plastick object for your game by passing it a Facade object that will be used to draw to the canvas. The Plastick object automatically controls the update loop and draw loop for your game project, and transfers the game simulation between various States.</p>


                        <pre><code><span class="hljs-keyword">var</span> game = <span class="hljs-keyword">new</span> Plastick(stage);
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>stage</b>
                                        <code>Object</code>
                                </p>

                                <p>The Facade object that will handle drawing this Plastick object.</p>



                        </section>



                        <section class="property">

                            <h3>Properties</h3>


                                <p>
                                    <b>stage</b>
                                        <code>Object</code>
                                </p>

                                <p>Reference to the Facade object linked to this Plastick.</p>



                                <p>
                                    <b>states</b>
                                        <code>Object</code>
                                </p>

                                <p>A stack of game states for flipping through various states of the game (intro, demo screen, menus, pause screen, etc).</p>



                                <p>
                                    <b>startTime</b>
                                        <code>Float</code>
                                </p>

                                <p>The time the game started running.</p>



                                <p>
                                    <b>currentTick</b>
                                        <code>Integer</code>
                                </p>

                                <p>Current unit of game time. Each tick represents one execution of the game state's update() method.</p>



                                <p>
                                    <b>tickAlpha</b>
                                        <code>Float</code>
                                </p>

                                <p>Interpolation (alpha) value of current tick. This is used in a system implementing fixed time step interpolation, to smooth screen updates that occur in between ticks. Updated immediately before executing the <code>Plastick.State.draw()</code> code.</p>



                                <p>
                                    <b>isRunning</b>
                                        <code>Boolean</code>
                                </p>

                                <p>True if the Plastick object is in a running state.</p>



                                <p>
                                    <b>data</b>
                                        <code>Object</code>
                                </p>

                                <p>A generic object which the user can store any game-related data in. This is not explicitly used by the Plastick framework, so you can store anything here.</p>



                                <p>
                                    <b>methods</b>
                                        <code>Object</code>
                                </p>

                                <p>A generic object which the user can store any game-related methods in. This is not explicitly used by the Plastick framework, so you can store anything here.</p>



                                <p>
                                    <b>TARGET_TPS</b>
                                        <code>Integer</code>
                                </p>

                                <p>The target rate of game simulation, in ticks per second. Do not modify this while the game is running.</p>



                                <p>
                                    <b>TICK_CHOKE</b>
                                        <code>Integer</code>
                                </p>

                                <p>The maximum number of ticks simulated per canvas frame.</p>



                        </section>



                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Object</code>
                                    </p>

                                    <p>New Plastick object.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.start">
                            <a href="#plastick.js-plastick.prototype.start" class="permalink">#</a> Plastick.start(state)
                        </h2>

                        <p>This will initialize the game with a pre-defined game state and start simulating the game.</p>


                        <pre><code>game.start(introState);
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>state</b>
                                        <code>Object</code>
                                </p>

                                <p>The Plastick.State object to start simulating with.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Boolean</code>
                                    </p>

                                    <p>This returns <code>false</code> if no valid State is passed in or if the game was already running, otherwise it returns <code>true</code>.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.stop">
                            <a href="#plastick.js-plastick.prototype.stop" class="permalink">#</a> Plastick.stop()
                        </h2>

                        <p>This will immediately halt simulation of the game and clear the
entire state stack.</p>


                        <pre><code><span class="hljs-comment">// pressed Escape to quit the game</span>
<span class="hljs-keyword">if</span> (pressedEsc) { game.stop(); }
</code></pre>





                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Boolean</code>
                                    </p>

                                    <p>This returns <code>false</code> if the game was not already running, otherwise it returns <code>true</code>.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.isrunning">
                            <a href="#plastick.js-plastick.prototype.isrunning" class="permalink">#</a> Plastick.isRunning()
                        </h2>

                        <p>Used to check if the game is running.</p>


                        <pre><code><span class="hljs-keyword">if</span> (game.isRunning()) { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'The game is running!'</span>); }
</code></pre>





                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Boolean</code>
                                    </p>

                                    <p>This returns <code>true</code> if <code>Plastick.start()</code> has been called and <code>Plastick.stop()</code> has not yet been called.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.pushstate">
                            <a href="#plastick.js-plastick.prototype.pushstate" class="permalink">#</a> Plastick.pushState(state)
                        </h2>

                        <p>This will pause the current game state and start simulation of a new game state on the next game tick by doing the following: <ul><li>Calling the current state's pause() method and destroying its event listeners</li><li>Pushing the passed State onto the state stack, making it the current state</li><li>Calling the new state's init() method and creating its event listeners</li></ul>
Note that this does not terminate execution of the current game tick. Since simulation of the new state will not begin until the next game tick, you may want to follow this by <code>return</code>ing from the update loop, or alternately place this call at the very end of your update loop.</p>


                        <pre><code><span class="hljs-comment">// pause the game</span>
<span class="hljs-keyword">if</span> (pauseButtonPressed) {
    game.pushState(pauseState);
    <span class="hljs-keyword">return</span>;
}
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>state</b>
                                        <code>Object</code>
                                </p>

                                <p>The <code>Plastick.State</code> object to switch simulation to.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Boolean</code>
                                    </p>

                                    <p>This returns <code>false</code> if no valid <code>Plastick.State</code> is passed in, otherwise it returns <code>true</code>.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.popstate">
                            <a href="#plastick.js-plastick.prototype.popstate" class="permalink">#</a> Plastick.popState()
                        </h2>

                        <p>This will end the current game state and resume simulation of the previous game state on the next game tick by doing the following:<ul><li>Calling the current state's <code>cleanup()</code> method and destroying its event listeners</li><li>Popping the current state off the state stack, making the prior state the current state</li><li>Calling the prior state's <code>resume()</code> method and creating its event listeners</li></ul>
Note that this does not terminate execution of the current game tick. Since simulation of the new state will not begin until the next game tick, you may want to follow this with a <code>return</code>ing from the update loop, or alternately place this call at the very end of your update loop.</p>


                        <p>If calling this method empties the state stack, <code>Plastick.stop()</code> will be invoked.</p>
<pre><code><span class="hljs-comment">// unpause the game</span>
<span class="hljs-keyword">if</span> (pauseButtonPressed) {
    game.popState();
    <span class="hljs-keyword">return</span>;
}
</code></pre>





                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Boolean</code>
                                    </p>

                                    <p>This returns <code>false</code> if there is no <code>Plastick.State</code> to pop off the state stack, otherwise this returns <code>true</code>.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.changestate">
                            <a href="#plastick.js-plastick.prototype.changestate" class="permalink">#</a> Plastick.changeState(state)
                        </h2>

                        <p>This will redirect simulation from the current game state to a new game state on the next game tick by doing the following:<ul><li>Calling the current state's cleanup() method and destroying its event listeners</li><li>Popping the current state off the state stack and pushing the passed State onto the state stack, making it the current state</li><li>Calling the new state's init() method and creating its event listeners</li></ul>
Note that this does not terminate execution of the current game tick. Since simulation of the new state will not begin until the next game tick, you may want to follow this with a <code>return</code>ing from the update loop, or alternately place this call at the very end of your update loop.</p>


                        <p>If calling this method empties the state stack, <code>Plastick.stop()</code> will be invoked. This may happen if the passed state is invalid and cannot be pushed onto the state stack.</p>
<pre><code><span class="hljs-comment">// enter the main menu from the intro splash screen</span>
<span class="hljs-keyword">if</span> (pressedAnyKey) {
    game.changeState(menuState);
    <span class="hljs-keyword">return</span>;
}
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>state</b>
                                        <code>Object</code>
                                </p>

                                <p>The <code>Plastick.State</code> object to switch simulation to.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Boolean</code>
                                    </p>

                                    <p>This returns <code>false</code> if there is no <code>Plastick.State</code> to pop off the state stack or if no valid <code>Plastick.State</code> is passed in, otherwise this returns <code>true</code>.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.currentstate">
                            <a href="#plastick.js-plastick.prototype.currentstate" class="permalink">#</a> Plastick.currentState()
                        </h2>

                        <p>This returns the State currently being simulated.</p>


                        




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Object</code>
                                    </p>

                                    <p>The current game state, as a <code>Plastick.State</code> object.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.gametime">
                            <a href="#plastick.js-plastick.prototype.gametime" class="permalink">#</a> Plastick.gameTime()
                        </h2>

                        <p>This returns the number of milliseconds that has passed in the game. Note that game time may be suspended whenever the containing browser tab is hidden.</p>


                        




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Float</code>
                                    </p>

                                    <p>The number of milliseconds that have passed since <code>Plastick.start()</code> was called, not including &quot;frozen&quot; time (blurred focus).</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.lerp">
                            <a href="#plastick.js-plastick.prototype.lerp" class="permalink">#</a> Plastick.lerp(before, after[, alpha])
                        </h2>

                        <p>Performs a linear interpolation between two numeric values using Plastick.tickAlpha.</p>


                        <pre><code><span class="hljs-keyword">var</span> xPos = game.lerp(sprite.prevPosition.x, sprite.currPosition.x);
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>before</b>
                                        <code>Float</code>
                                </p>

                                <p>The &quot;before&quot; value.</p>



                                <p>
                                    <b>after</b>
                                        <code>Float</code>
                                </p>

                                <p>The &quot;after&quot; value.</p>



                                <p>
                                    <b>alpha</b>
                                        <code>Float</code>
                                        <span class="label label-default">Optional</span>
                                </p>

                                <p>If provided, the values will be interpolated using this alpha instead of Plastick.tickAlpha. This should be a value between 0.0 and 1.0.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Float</code>
                                    </p>

                                    <p>The result of the linear interpolation.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.prototype.setdebug">
                            <a href="#plastick.js-plastick.prototype.setdebug" class="permalink">#</a> Plastick.setDebug()
                        </h2>

                        <p>Toggles debug mode. When debug mode is active, a global event is registered to the 'SHIFT + SPACE' key combo to call Plastick.stop(). It will also enable console.info() calls to display state changes.</p>


                        <pre><code>game.setDebug(<span class="hljs-literal">true</span>);
</code></pre>





                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-private">

                        <h2 id="plastick.js-plastick.prototype._cleanup">
                            <a href="#plastick.js-plastick.prototype._cleanup" class="permalink">#</a> Plastick._cleanup()
                            <small>private method</small>
                        </h2>

                        <p>Performs cleanup maintenance on a game that has been halted with <code>Plastick.stop()</code>.</p>


                        




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>true</code>
                                    </p>

                                    



                        </section>

                    </div>


                    <div class="method scope-private">

                        <h2 id="plastick.js-plastick.prototype._freeze">
                            <a href="#plastick.js-plastick.prototype._freeze" class="permalink">#</a> Plastick._freeze()
                            <small>private method</small>
                        </h2>

                        <p>Freezes or unfreezes the game simulation (depending on the &quot;blur&quot; state of the web page when it's called). The example code shows how Plastick uses this method.</p>


                        <pre><code><span class="hljs-built_in">document</span>.addEventListener(visibilityChange, <span class="hljs-keyword">this</span>._freeze.bind(<span class="hljs-keyword">this</span>));
</code></pre>





                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-private">

                        <h2 id="plastick.js-plastick.prototype._createeventlisteners">
                            <a href="#plastick.js-plastick.prototype._createeventlisteners" class="permalink">#</a> Plastick._createEventListeners(state)
                            <small>private method</small>
                        </h2>

                        <p>Creates event listeners registered to a game state.</p>


                        


                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>state</b>
                                        <code>Object</code>
                                </p>

                                <p>The <code>Plastick.State</code> that is now current.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-private">

                        <h2 id="plastick.js-plastick.prototype._destroyeventlisteners">
                            <a href="#plastick.js-plastick.prototype._destroyeventlisteners" class="permalink">#</a> Plastick._destroyEventListeners(state)
                            <small>private method</small>
                        </h2>

                        <p>Removes event listeners registered to a game state.</p>


                        


                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>state</b>
                                        <code>Object</code>
                                </p>

                                <p>The <code>Plastick.State</code> that was popped from the state stack.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-private">

                        <h2 id="plastick.js-plastick.prototype._gameloop">
                            <a href="#plastick.js-plastick.prototype._gameloop" class="permalink">#</a> Plastick._gameLoop()
                            <small>private method</small>
                        </h2>

                        <p>The main game loop. The game is simulated using a fixed time step design. _update() is called once per canvas frame, but could simulate several game ticks in each call. The rate of the game tick simulation is decoupled from the canvas frame rate (which is governed by requestAnimationFrame(), via Facade). If the simulation falls behind momentarily, it will try to catch up at a maximum rate of this.TICK_CHOKE ticks per call. Below is Plastick's implementation of this game loop:</p>


                        <pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{

    <span class="hljs-keyword">var</span> ticksUpdated = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">this</span>._frameTime = <span class="hljs-keyword">this</span>.gameTime();
    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>._frameTime * <span class="hljs-keyword">this</span>.TARGET_TPS / <span class="hljs-number">1000</span> &gt; <span class="hljs-keyword">this</span>.currentTick &amp;&amp;
            ticksUpdated &lt; <span class="hljs-keyword">this</span>.TICK_CHOKE) {
        <span class="hljs-keyword">this</span>.currentTick += <span class="hljs-number">1</span>;
        ticksUpdated += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>.currentState()._update(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">this</span>.tickTime = <span class="hljs-keyword">this</span>.gameTime();
    }
    <span class="hljs-comment">// skip draw if game was stopped (no state on the stack!)</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._isRunning) {
        <span class="hljs-keyword">this</span>.tickAlpha = <span class="hljs-keyword">this</span>.gameTime() * <span class="hljs-keyword">this</span>.TARGET_TPS / <span class="hljs-number">1000</span> - <span class="hljs-keyword">this</span>.currentTick + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">this</span>.currentState()._draw(<span class="hljs-keyword">this</span>);
    }
};
</code></pre>





                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state">
                            <a href="#plastick.js-plastick.state" class="permalink">#</a> Plastick.State([name])
                        </h2>

                        <p>This represents a game state (menu, pause screen, demo screen, etc). The default behavior for the six definable methods is to do nothing. The user can redefine each one by passing it a callback method.</p>


                        <pre><code>menuState = <span class="hljs-keyword">new</span> State();
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>name</b>
                                        <code>String</code>
                                        <span class="label label-default">Optional</span>
                                </p>

                                <p>A label for the new state (useful when debugging).</p>



                        </section>



                        <section class="property">

                            <h3>Properties</h3>


                                <p>
                                    <b>data</b>
                                        <code>Object</code>
                                </p>

                                <p>A generic object which the user can store any state-related data in.</p>



                                <p>
                                    <b>methods</b>
                                        <code>Object</code>
                                </p>

                                <p>A generic object which the user can store any state-related methods in.</p>



                        </section>



                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Object</code>
                                    </p>

                                    <p>A new <code>Plastick.State</code> object.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.registerlistener">
                            <a href="#plastick.js-plastick.state.prototype.registerlistener" class="permalink">#</a> Plastick.State.registerListener(element, type, callback)
                        </h2>

                        <p>This method allows the user to register an event listener with this state. All registered events are added to the page when this is the current state, and removed from the page when this state is paused or finished.</p>


                        <pre><code>menuState.registerListener(<span class="hljs-built_in">document</span>, <span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{...});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>element</b>
                                        <code>Object</code>
                                </p>

                                <p>The object to register the listener for.</p>



                                <p>
                                    <b>type</b>
                                        <code>String</code>
                                </p>

                                <p>The event to register the listener for.</p>



                                <p>
                                    <b>callback</b>
                                        <code>Function</code>
                                </p>

                                <p>The callback function to register.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.deregisterlistener">
                            <a href="#plastick.js-plastick.state.prototype.deregisterlistener" class="permalink">#</a> Plastick.State.deregisterListener(element, type[, callback])
                        </h2>

                        <p>This method allows the user to deregister an event listener with this state. If you want to deregister a specific callback, you <em>must</em> pass in a reference of the same copy that was registered eariler. If the callback parameter is omitted, all callbacks linked to the specified element-event combination are deregistered.</p>


                        <pre><code>menuState.deregisterListener(<span class="hljs-built_in">document</span>, <span class="hljs-string">'click'</span>);
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>element</b>
                                        <code>Object</code>
                                </p>

                                <p>The object to deregister the listener(s) for.</p>



                                <p>
                                    <b>type</b>
                                        <code>String</code>
                                </p>

                                <p>The event to deregister the listener(s) for.</p>



                                <p>
                                    <b>callback</b>
                                        <code>Function</code>
                                        <span class="label label-default">Optional</span>
                                </p>

                                <p>The specific callback function to deregister.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>


                            <p><code>Void</code></p>


                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.init">
                            <a href="#plastick.js-plastick.state.prototype.init" class="permalink">#</a> Plastick.State.init(func)
                        </h2>

                        <p>Registers a callback to the <code>init()</code> method. This method is called by Plastick whenever this state is added to the state stack.</p>


                        <pre><code>menuState.init(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{...});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>func</b>
                                        <code>Function</code>
                                </p>

                                <p>The function to use for the <code>init()</code> callback.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Function</code>
                                    </p>

                                    <p>The function that was registered.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.cleanup">
                            <a href="#plastick.js-plastick.state.prototype.cleanup" class="permalink">#</a> Plastick.State.cleanup(func)
                        </h2>

                        <p>Registers a callback to the <code>cleanup()</code> method. This method is called by Plastick whenever this state is removed from the state stack.</p>


                        <pre><code>menuState.cleanup(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{...});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>func</b>
                                        <code>Function</code>
                                </p>

                                <p>The function to use for the <code>cleanup()</code> callback.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Function</code>
                                    </p>

                                    <p>The function that was registered.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.update">
                            <a href="#plastick.js-plastick.state.prototype.update" class="permalink">#</a> Plastick.State.update(func)
                        </h2>

                        <p>Registers a callback to the <code>update()</code> method. This method is called by Plastick once during each game tick. The passed callback should contain your main game loop, and as part of a fixed time step design it should always simulate a constant amount of game time. In order to maintain accurate timing in your game, Plastick may call this multiple times between each canvas frame.</p>


                        <pre><code>menuState.update(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{...});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>func</b>
                                        <code>Function</code>
                                </p>

                                <p>The function to use for the <code>update()</code> callback.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Function</code>
                                    </p>

                                    <p>The function that was registered.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.draw">
                            <a href="#plastick.js-plastick.state.prototype.draw" class="permalink">#</a> Plastick.State.draw(func)
                        </h2>

                        <p>Registers a callback to the <code>draw()</code> method. This method is called by Plastick once before each canvas frame is drawn. The passed callback should contain your rendering code. You do not need to call renderAnimationFrame(); this is done automatically by Plastick's Facade object.</p>


                        <pre><code>menuState.draw(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    game.stage.clear();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> e = <span class="hljs-number">0</span>; e &lt; entities.length; e += <span class="hljs-number">1</span>) {
    }
});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>func</b>
                                        <code>Function</code>
                                </p>

                                <p>The function to use for the <code>draw()</code> callback.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Function</code>
                                    </p>

                                    <p>The function that was registered.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.pause">
                            <a href="#plastick.js-plastick.state.prototype.pause" class="permalink">#</a> Plastick.State.pause(func)
                        </h2>

                        <p>Registers a callback to the <code>pause()</code> method. This method is called by Plastick when this state is the current state and is being suspended to begin simulation of a new state.</p>


                        <pre><code>menuState.pause(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{...});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>func</b>
                                        <code>Function</code>
                                </p>

                                <p>The function to use for the <code>pause()</code> callback.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Function</code>
                                    </p>

                                    <p>The function that was registered.</p>




                        </section>

                    </div>


                    <div class="method scope-public">

                        <h2 id="plastick.js-plastick.state.prototype.resume">
                            <a href="#plastick.js-plastick.state.prototype.resume" class="permalink">#</a> Plastick.State.resume(func)
                        </h2>

                        <p>Registers a callback to the <code>resume()</code> method. This method is called by Plastick when this state is suspended and is resuming simulation as the current state.</p>


                        <pre><code>menuState.resume(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{...});
</code></pre>



                        <section class="parameters">

                            <h3>Parameters</h3>


                                <p>
                                    <b>func</b>
                                        <code>Function</code>
                                </p>

                                <p>The function to use for the <code>resume()</code> callback.</p>



                        </section>




                        <section class="returns">

                            <h3>Returns</h3>



                                    <p>
                                            <code>Function</code>
                                    </p>

                                    <p>The function that was registered.</p>




                        </section>

                    </div>



            </div>

        </div>

    </div>

</div>

<footer class="bs-footer">

    <div class="container">

        <p>Documentation generated with <a href="https://github.com/neogeek/doxdox">doxdox</a>.</p>

    </div>

</footer>

</body>
</html>
